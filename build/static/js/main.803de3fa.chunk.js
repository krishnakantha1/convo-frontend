(this.webpackJsonpshadowclan=this.webpackJsonpshadowclan||[]).push([[0],{13:function(e,a,t){e.exports={container:"Members_container__16eIs",members:"Members_members__3c57r",status:"Members_status__16vIg",onlineContainer:"Members_onlineContainer__3FMHe",offlineContainer:"Members_offlineContainer__mmUSj",member:"Members_member__3McS8",onlineTag:"Members_onlineTag__ze82L",offlineTag:"Members_offlineTag__pfl3p",crown:"Members_crown__3Qhg2",copy:"Members_copy__2fyRO",leave:"Members_leave__16tMV"}},19:function(e,a,t){e.exports={container:"Home_container__1X_qP",bannerContainer:"Home_bannerContainer__91Ztq",appName:"Home_appName__3W825",tag:"Home_tag__1t5L4",goToChat:"Home_goToChat__1J9hh",bannerSVG:"Home_bannerSVG__a4U5w",topChat:"Home_topChat__1VD6a",fadeIn:"Home_fadeIn__1X9fi",bottomChat:"Home_bottomChat__3l6fU",featureContainer:"Home_featureContainer__1YX5o"}},20:function(e,a,t){e.exports={innerChatContainer:"Chat_innerChatContainer__qfdWd",chatHeading:"Chat_chatHeading__20c_F",chatArea:"Chat_chatArea__14jPi",getPreviousChatButton:"Chat_getPreviousChatButton__oM3_m",previousBtn:"Chat_previousBtn__1Ld5u",gettingPrevious:"Chat_gettingPrevious__1nxyr",blink:"Chat_blink__2BEHP",chats:"Chat_chats__1ykpq",messageInner:"Chat_messageInner__3X5sk",sameUser:"Chat_sameUser__1hF1d",userName:"Chat_userName__18e7F",myMessage:"Chat_myMessage__2AMVv",othersMessage:"Chat_othersMessage__2mnDb",rightSlide:"Chat_rightSlide__2FLRA",leftSlide:"Chat_leftSlide__zHDqw",notLoggedIn:"Chat_notLoggedIn__1-6wY",ChatLoader:"Chat_ChatLoader__1NFAy",blinker:"Chat_blinker__uzQ9k",Members:"Chat_Members__iMeND"}},25:function(e,a,t){e.exports={container:"MessageTypeField_container__1QbEZ",toReplyMessageContainer:"MessageTypeField_toReplyMessageContainer__Wz5MQ",toReplyMessageBubble:"MessageTypeField_toReplyMessageBubble__3Nkg1",form:"MessageTypeField_form___93Yw",textFieldWrapper:"MessageTypeField_textFieldWrapper__ds32U",textArea:"MessageTypeField_textArea__3StSc",textLength:"MessageTypeField_textLength__2ESLC",submit:"MessageTypeField_submit__2WuOm"}},27:function(e,a,t){e.exports={chatContainer:"Chat_chatContainer__3aZaR",LoaderContainer:"Chat_LoaderContainer__3XR5Y",xyz:"Chat_xyz__1g8_g",slide:"Chat_slide__1VKdN"}},28:function(e,a,t){e.exports={chatControler:"ChatControler_chatControler__4Lk58",groupBadge:"ChatControler_groupBadge__1o1tB",badge:"ChatControler_badge__G28Fl",addBadge:"ChatControler_addBadge__whh_-",badgeText:"ChatControler_badgeText__1nB3C"}},29:function(e,a,t){e.exports={container:"StandardMessage_container__30TBT",myMessage:"StandardMessage_myMessage__3C5hj",messageBubble:"StandardMessage_messageBubble__1ZCKb",prevMessagFromSameUser:"StandardMessage_prevMessagFromSameUser__MEGDU",userName:"StandardMessage_userName__13SXS",message:"StandardMessage_message__3G_qt",messageFooter:"StandardMessage_messageFooter__SdhcK"}},4:function(e,a,t){e.exports={container:"LogReg_container__2HpUB",innerContainer:"LogReg_innerContainer__2pA7B",displayOff:"LogReg_displayOff__2T_pr",danger:"LogReg_danger__3_4tO",loader:"LogReg_loader__33vgE",arc:"LogReg_arc__3Gbyq"}},40:function(e,a,t){e.exports={container:"GroupManagement_container__3Tfii",formContainer:"GroupManagement_formContainer__32k2F",inputContainer:"GroupManagement_inputContainer__1nqCd"}},42:function(e,a){e.exports={createToken:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()",a=[],t=0;t<10;t++)a.push(e[Math.round(Math.random()*e.length)]);return a.join("")}}},45:function(e,a,t){e.exports={container:"ReplyedMessage_container__1oA7q",name:"ReplyedMessage_name__3aXLV",message:"ReplyedMessage_message__qTCpV"}},48:function(e,a,t){e.exports={container:"SystemMessage_container__3BtUt",message:"SystemMessage_message__3Q3VR"}},49:function(e,a,t){e.exports={container:"Loading_container__1SqVU",blinker:"Loading_blinker__IqsWu",blink:"Loading_blink__1rnrw"}},62:function(e,a,t){e.exports=t.p+"static/media/chat-with-friends.e18cf133.svg"},63:function(e,a,t){e.exports=t.p+"static/media/both-mobile-pc.ce5155b6.svg"},65:function(e,a,t){e.exports={container:"AuthCheck_container__MWjUE",visibility:"AuthCheck_visibility__2HoNZ",showup:"AuthCheck_showup__3ZeP4"}},67:function(e,a,t){e.exports=t(98)},8:function(e,a,t){e.exports={nav:"Nav_nav__1BJw3",navFixed:"Nav_navFixed__3NfN_",logo:"Nav_logo__tt8Id",navLinks:"Nav_navLinks__2kIvc",link:"Nav_link__3MW6m",burger:"Nav_burger__2Pvlf",join:"Nav_join__3NrC1",navActive:"Nav_navActive__YqWLY",toggle:"Nav_toggle__115Np",line1:"Nav_line1__1uIhk",line2:"Nav_line2__2d9uL",line3:"Nav_line3__1rWy7",promptBackground:"Nav_promptBackground__1MMor",prompt:"Nav_prompt__2vTlm",showPrompt:"Nav_showPrompt__30yae"}},97:function(e,a,t){},98:function(e,a,t){"use strict";t.r(a);var n,r=t(0),o=t.n(r),c=t(61),s=t.n(c),l=t(17),i=t.n(l),u=t(26),m=t(1),_=t(30),g=t(2),p=t(34),d=t.n(p),f=t(8),v=t.n(f),b={loggedIn:!1,username:null,token:null,id:null},h=Object(r.createContext)(b),E=function(e){var a=e.children,t=Object(r.useState)(b),n=Object(m.a)(t,2),c=n[0],s=n[1];return o.a.createElement(h.Provider,{value:{LoginDetail:c,loggin:function(e){e&&(localStorage.setItem("LogDetail",JSON.stringify(e.token)),s({loggedIn:!0,username:e.username,token:e.token,id:e.id}))},loggout:function(){c.loggedIn&&(s(b),localStorage.removeItem("LogDetail"))}}},a)},C=function(){var e=Object(r.useState)(!1),a=Object(m.a)(e,2),t=a[0],n=a[1],c=Object(r.useState)(!1),s=Object(m.a)(c,2),l=s[0],i=s[1],u=Object(r.useState)(!1),g=Object(m.a)(u,2),p=g[0],d=g[1],f=Object(r.useContext)(h),b=f.LoginDetail,E=f.loggout;Object(r.useEffect)((function(){var e=function(e){!t&&window.scrollY>60?n(!0):t&&window.scrollY<60&&n(!1)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[t]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("nav",{className:"".concat(v.a.nav," ").concat(t?v.a.navFixed:"")},o.a.createElement("div",{className:v.a.logo},o.a.createElement("h2",null,"CONVO")),o.a.createElement("ul",{className:"".concat(v.a.navLinks," ").concat(p?v.a.navActive:"")},o.a.createElement("li",{onClick:function(){return d(!p)}},o.a.createElement(_.b,{to:"/",className:v.a.link},"Home")),o.a.createElement("li",{onClick:function(){return d(!p)}},o.a.createElement(_.b,{to:"/chat",className:v.a.link},"Chat")),b.loggedIn?o.a.createElement("li",{onClick:function(){i(!l),d(!p)}},"Logout"):o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{onClick:function(){return d(!p)}},o.a.createElement(_.b,{to:"/login",className:v.a.link},"Login")),o.a.createElement("li",{className:v.a.join,onClick:function(){return d(!p)}},o.a.createElement(_.b,{to:"/register",className:v.a.link},"Join")))),o.a.createElement("div",{className:"".concat(v.a.burger," ").concat(p?v.a.toggle:null),onClick:function(){return d(!p)}},o.a.createElement("div",{className:v.a.line1}),o.a.createElement("div",{className:v.a.line2}),o.a.createElement("div",{className:v.a.line3}))),l&&o.a.createElement("div",{className:v.a.promptBackground,onClick:function(){return i(!l)}},o.a.createElement("div",{className:v.a.prompt,onClick:function(e){e.stopPropagation()}},o.a.createElement("p",null,"Are you sure you want to logout?"),o.a.createElement("button",{onClick:function(){i(!l),E()}},"Logout"))))},O=t(19),j=t.n(O),y=function(e){var a=e.history;return o.a.createElement("div",{className:j.a.bannerContainer},o.a.createElement("section",null,o.a.createElement("h1",{className:j.a.appName},"CONVO"),o.a.createElement("p",{className:j.a.tag},"A chat app for friends!"),o.a.createElement("button",{className:j.a.goToChat,onClick:function(e){a.push("/chat")}},"Open Chat")),o.a.createElement("svg",{width:"1119.5",height:"935.37",version:"1.1",viewBox:"0 0 296.19 247.48",xmlns:"http://www.w3.org/2000/svg",className:j.a.bannerSVG},o.a.createElement("g",{transform:"translate(61.326 -82.104)"},o.a.createElement("rect",{x:"-61.326",y:"82.104",width:"295.22",height:"247.48",fill:"none",opacity:".997",style:{paintOrder:"stroke fill markers"}}),o.a.createElement("path",{d:"m38.16 82.171a3.8189 3.8189 0 0 0-1.8805 0.5116l-5.7283 3.3073h3.8189v119.06a11.457 11.457 0 0 0 5.7283 9.9219l189.04 109.14a3.8189 3.8189 0 0 0 5.3e-4 0h-5.3e-4l-1.91 3.3068 5.7288-3.3068h5.3e-4a3.8189 3.8189 0 0 0 1.9089-3.3068v-119.06a11.457 11.457 0 0 0-5.7283-9.9219l-189.04-109.14a3.8189 3.8189 0 0 0-1.9384-0.5116z",fill:"#999"}),o.a.createElement("path",{d:"m34.37 218.28 189.04 109.14a3.8189 3.8189 150 0 0 5.7284-3.3073v-119.06a11.457 11.457 60 0 0-5.7284-9.9219l-189.04-109.14a3.8189 3.8189 150 0 0-5.7284 3.3073v119.06a11.457 11.457 60 0 0 5.7284 9.9219z",fill:"#4d4d4d"}),o.a.createElement("path",{d:"m34.37 94.709v2.4051a3.6455 3.6455 60 0 0 1.8228 3.1571l7.8113 4.5098a1.2152 1.2152 150 0 0 1.8228-1.0524v-2.4051a3.6455 3.6455 60 0 0-1.8228-3.1571l-7.8113-4.5098a1.2152 1.2152 150 0 0-1.8228 1.0524z",fill:"#87aade"}),o.a.createElement("path",{d:"m51.556 104.68v2.3115a3.7265 3.7265 60 0 0 1.8633 3.2273l168.13 97.067a1.2422 1.2422 150 0 0 1.8633-1.0758v-2.3116a3.7265 3.7265 60 0 0-1.8633-3.2273l-168.13-97.067a1.2422 1.2422 150 0 0-1.8633 1.0758z",fill:"#87aade"}),o.a.createElement("g",{id:j.a.topChat,fill:"#fff"},o.a.createElement("path",{d:"m129.81 174.77a3.8189 3.8189 0 0 0-1.7813 0.4563l6e-3 -0.0109-5.9862 3.4396 3.9713-0.0661v19.844a11.457 11.457 0 0 0 5.7283 9.9219l57.284 33.073 5.7288 9.9224v13.229l5.7283-3.3073v-13.229l5.7283 3.3073-1.9766 3.344 5.5904-3.2339a3.8189 3.8189 0 0 0 2.1146-3.4174v-19.844a11.457 11.457 0 0 0-5.7283-9.9219l-74.469-42.995a3.8189 3.8189 0 0 0-1.9384-0.51159z",fill:"#003380"}),o.a.createElement("path",{d:"m124.09 178.08a3.8189 3.8189 0 0 0-3.79 3.8189v19.844a11.457 11.457 0 0 0 5.7283 9.9219l57.284 33.073 11.457 19.844v-13.229l5.7283 3.3073a3.8189 3.8189 0 0 0 5.7283-3.3073v-19.844a11.457 11.457 0 0 0-5.7283-9.9219l-74.469-42.995a3.8189 3.8189 0 0 0-1.9384-0.51159z",fill:"#0055d4"}),o.a.createElement("path",{d:"m131.75 198.44v1e-5a17.185 17.185 60 0 0 8.5926 14.883 5.7284 5.7284 150 0 0 8.5926-4.9609v-1e-5a17.185 17.185 60 0 0-8.5926-14.883 5.7284 5.7284 150 0 0-8.5926 4.9609z"}),o.a.createElement("path",{d:"m154.67 211.8a17.186 17.186 59.559 0 0 8.7072 14.817 5.7299 5.7299 148.68 0 0 8.478-5.1594 17.186 17.186 59.559 0 0-8.7072-14.817 5.7299 5.7299 148.68 0 0-8.478 5.1594z"}),o.a.createElement("path",{d:"m177.58 225.03a17.186 17.186 59.559 0 0 8.7072 14.817 5.7299 5.7299 148.68 0 0 8.478-5.1594 17.186 17.186 59.559 0 0-8.7072-14.817 5.7299 5.7299 148.68 0 0-8.478 5.1594z"})),o.a.createElement("g",{id:j.a.bottomChat,fill:"#fff"},o.a.createElement("path",{d:"m5.4621 151.81a3.8189 3.8189 0 0 0-1.6836 0.40566l0.0165-0.0269-6.01 3.5078 3.8871-0.0677 5.2e-4 -1e-3a3.8189 3.8189 0 0 0 0 1e-3v19.844a11.457 11.457 0 0 0 5.7278 9.9219l5.7283 3.3073v13.229l11.457-6.6146 57.284 33.073-1.6722 3.1249 5.4684-3.112a3.8189 3.8189 0 0 0 5.16e-4 0l0.2837-0.16174-0.02584 1e-3a3.8189 3.8189 0 0 0 1.6738-3.1595v-19.844a11.457 11.457 0 0 0-5.7283-9.9219l-74.469-42.995a3.8189 3.8189 0 0 0-1.9384-0.5116z",fill:"#008000"}),o.a.createElement("path",{d:"m-0.26622 155.11a3.8189 3.8189 0 0 0-3.79 3.8189v19.844a11.457 11.457 0 0 0 5.7283 9.9219l5.7283 3.3073v13.229l11.457-6.6146 57.284 33.073a3.8189 3.8189 0 0 0 5.7283-3.3073v-19.844a11.457 11.457 0 0 0-5.7283-9.9219l-74.469-42.995a3.8189 3.8189 0 0 0-1.9384-0.5116z",fill:"#0f0"}),o.a.createElement("path",{d:"m7.4006 175.53a17.185 17.185 59.799 0 0 8.6448 14.853 5.7287 5.7287 149.4 0 0 8.5404-5.0514 17.185 17.185 59.799 0 0-8.6448-14.853 5.7287 5.7287 149.4 0 0-8.5404 5.0514z"}),o.a.createElement("path",{d:"m30.314 188.69v0.0123a17.174 17.174 60 0 0 8.5872 14.874l0.0107 6e-3a5.7248 5.7248 150 0 0 8.5872-4.9578v-0.0123a17.174 17.174 60 0 0-8.5872-14.874l-0.0107-6e-3a5.7248 5.7248 150 0 0-8.5872 4.9578z"}),o.a.createElement("path",{d:"m53.228 202.32a17.19 17.19 58.677 0 0 8.9363 14.684 5.7421 5.7421 146.04 0 0 8.2489-5.5562 17.19 17.19 58.677 0 0-8.9363-14.684 5.7421 5.7421 146.04 0 0-8.2489 5.5562z"})))))},N=function(e){var a=e.image,t=e.title,n=e.note;return o.a.createElement("section",{className:j.a.featureContainer},o.a.createElement("img",{src:a,alt:"message bubble"}),o.a.createElement("div",null,o.a.createElement("h2",null,t),o.a.createElement("p",null,o.a.createElement("span",null,"CONVO")," ",n)))},k=t(62),w=t.n(k),x=t(63),M=t.n(x),S=function(e){var a=e.history,t=[{title:"Chat With Friends In Real Time.",note:"Provides reliable and real time message feature so you can keep up with what your friends and family are doing anytime.",image:w.a},{title:"PC and mobile friendly design.",note:"can be used to chat with anyone anywhere with any device, both PC or a mobile device.",image:M.a}];return o.a.createElement("div",{className:j.a.container},o.a.createElement(y,{history:a}),t.map((function(e,a){return o.a.createElement(N,{image:e.image,title:e.title,note:e.note,key:a})})))},L=t(5),T=t(27),D=t.n(T),F=t(28),R=t.n(F),B=function(e){var a=e.groups,t=e.setDisplayedGroup,n=e.setGroupToggle;return o.a.createElement("div",{className:R.a.chatControler},Object.keys(a).map((function(e,n){return o.a.createElement(I,{group:a[e],key:n,setDisplayedGroup:t})})),o.a.createElement("div",{className:R.a.groupBadge},o.a.createElement("span",{className:R.a.addBadge,onClick:function(){return n((function(e){return!e}))}},o.a.createElement("p",{className:R.a.badgeText},"+"))))},I=function(e){var a=e.group,t=e.setDisplayedGroup;return o.a.createElement("div",{className:R.a.groupBadge},o.a.createElement("span",{className:R.a.badge,onClick:function(){return t(a)}},o.a.createElement("p",{className:R.a.badgeText},a.group_name[0])))},P=t(37),G=t(20),A=t.n(G),H=t(45),z=t.n(H),Y=function(e){var a=e.r_username,t=e.r_message_text;return o.a.createElement("div",{className:z.a.container},o.a.createElement("p",{className:z.a.name},a),o.a.createElement("p",{className:z.a.message},t))},V=t(29),q=t.n(V),U=function(e){var a=e.message,t=e.prev_message_from_same_user,n=e.setMessageToReply,c=Object(r.useContext)(h).LoginDetail.id,s=function(e){var a=[];a.push(e.getDate()),a.push(e.getMonth()+1),a.push(e.getFullYear());var t=[];return t.push(e.getHours()%12),t.push(":"),t.push(e.getMinutes()),t.push(" "),t.push(e.getHours()>=12?"PM":"AM"),a.join("/")+" "+t.join("")},l=function(e){n(a)};return o.a.createElement("div",{className:"".concat(q.a.container," ").concat(a.r_user_id===c?q.a.myMessage:"")},o.a.createElement("div",{className:"".concat(q.a.messageBubble," ").concat(t?q.a.prevMessagFromSameUser:"")},t||c===a.r_user_id?null:o.a.createElement("p",{className:q.a.userName},a.r_user_name),"RPLY"!==a.r_message_type?null:o.a.createElement(Y,{r_username:c===a.r_user_id?"You":a.r_replyed_message_username,r_message_text:a.r_replyed_message_text}),o.a.createElement("p",{className:q.a.message},a.r_message_text),o.a.createElement("div",{className:q.a.messageFooter},c===a.r_user_id?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{type:"button",onClick:l},"\u2b91"),o.a.createElement("p",null,s(new Date(a.r_message_created_on)))):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,s(new Date(a.r_message_created_on))),o.a.createElement("button",{type:"button",onClick:l},"\u2b90")))))},W=t(48),X=t.n(W),J=function(e){var a=e.message;return o.a.createElement("div",{className:X.a.container},o.a.createElement("p",{className:X.a.message},a.r_message_text))},Z=o.a.memo((function(e){var a=e.messageList,t=e.setMessageToReply,n="";return o.a.createElement(o.a.Fragment,null,a.map((function(e){var a=!1;return n===e.r_user_name?a=!0:n=null===e.r_user_name?"*":e.r_user_name,"SYS"===e.r_message_type?o.a.createElement(J,{key:e.r_message_id,message:e}):o.a.createElement(U,{key:e.r_message_id,message:e,setMessageToReply:t,prev_message_from_same_user:a})})))})),Q=t(25),K=t.n(Q),$=function(e){var a=e.socket,t=e.group,n=e.messageToReply,c=e.setMessageToReply,s=Object(r.useState)(""),l=Object(m.a)(s,2),i=l[0],u=l[1],_=Object(r.useContext)(h).LoginDetail.id;return o.a.createElement("div",{className:K.a.container},Object.keys(n).length>0&&o.a.createElement("div",{className:K.a.toReplyMessageContainer},o.a.createElement("div",{className:K.a.toReplyMessageBubble},o.a.createElement("p",null,n.r_user_id===_?"You":n.r_user_name),o.a.createElement("p",null,n.r_message_text)),o.a.createElement("button",{type:"button",onClick:function(e){c({})}},"\u2716")),o.a.createElement("form",{className:K.a.form,onSubmit:function(e){e.preventDefault(),0!==i.length&&(a.emit("cnvo_new_user_message",{userID:_,group_id:t.group_id,message_text:i,replyed_to_message_id:n.r_message_id}),u(""),c({}))}},o.a.createElement("div",{className:K.a.textFieldWrapper},o.a.createElement("input",{className:K.a.textArea,type:"text",value:i,onChange:function(e){e.target.value.length>1e3||u(e.target.value)},placeholder:"Type a message here..."}),o.a.createElement("p",{className:K.a.textLength},i.length,"/1000")),o.a.createElement("input",{className:K.a.submit,type:"submit",value:"send"})))},ee=t(42),ae=t(49),te=t.n(ae),ne=function(e){var a=e.background_color;return a||(a="black"),o.a.createElement("div",{style:{backgroundColor:a},className:te.a.container},o.a.createElement("div",{className:te.a.blinker},o.a.createElement("span",{style:{"--i":"1"}}),o.a.createElement("span",{style:{"--i":"2"}}),o.a.createElement("span",{style:{"--i":"3"}})))},re=function(e){var a=e.displayedGroup,t=e.socket,n=Object(r.useContext)(h).LoginDetail.id,c=Object(r.useState)([]),s=Object(m.a)(c,2),l=s[0],i=s[1],u=Object(r.useState)(!1),_=Object(m.a)(u,2),g=_[0],p=_[1],d=Object(r.useState)(!1),f=Object(m.a)(d,2),v=f[0],b=f[1],E=Object(r.useState)(!0),C=Object(m.a)(E,2),O=C[0],j=C[1],y=Object(r.useState)(!1),N=Object(m.a)(y,2),k=N[0],w=N[1],x=Object(r.useState)({}),M=Object(m.a)(x,2),S=M[0],L=M[1],T=Object(r.useRef)(),D=Object(r.useRef)(),F=Object(r.useRef)();Object(r.useEffect)((function(){!0===g&&(T.current.scrollTop=T.current.scrollHeight,p(!1))}),[g]),Object(r.useEffect)((function(){!1===v&&(T.current.scrollTop=T.current.scrollHeight-D.current)}),[v]),Object(r.useEffect)((function(){return i([]),L({}),b(!1),w(!1),j(!0),F.current=Object(ee.createToken)(),t.emit("cnvo_get_latest_messages",{re_gtoken:F.current,group_id:a.group_id,user_id:n}),t.on("cnvo_latest_messages_of_group",(function(e){var a=e.re_gtoken,t=e.data;a===F.current&&(w(!0),p(!0),j(!1),i((function(e){return[].concat(Object(P.a)(t),Object(P.a)(e))})))})),t.on("cnvo_previous_message_chunks_of_group",(function(e){var a=e.re_gtoken,t=e.data;0===t.length&&w(!1),a===F.current&&(i((function(e){return[].concat(Object(P.a)(t),Object(P.a)(e))})),b(!1))})),t.on("cnvo_new_created_message",(function(e){0!==e.length&&(e[0].r_user_id===n&&p(!0),i((function(a){return[].concat(Object(P.a)(a),[e[0]])})))})),function(){t.off("cnvo_get_latest_messages"),t.off("cnvo_previous_message_chunks_of_group"),t.off("cnvo_latest_messages_of_group"),t.off("cnvo_new_created_message"),t.emit("cnvo_user_closed_group",{user_id:n,group_id:a.group_id})}}),[a,n]);var R=Object(r.useState)(0),B=Object(m.a)(R,2),I=B[0],G=B[1],H=null,z=null;return o.a.createElement(o.a.Fragment,null,O?o.a.createElement("div",{className:A.a.innerChatContainer,ref:T},o.a.createElement(ne,{background_color:"rgb(75, 75, 75)"})):o.a.createElement("div",{className:"".concat(A.a.innerChatContainer," \n          ").concat(-1===I?A.a.rightSlide:"","\n          ").concat(1===I?A.a.leftSlide:"","\n          "),onTouchStart:function(e){var a=function(e){return e.touches||e.originalEvent.touches}(e)[0];H=a.clientX,z=a.clientY},onTouchMove:function(e){if(H&&z){var a=e.touches[0].clientX,t=e.touches[0].clientY,n=H-a,r=z-t;Math.abs(n)>Math.abs(r)&&(n>0?0===I?G(1):-1===I&&G(0):0===I?G(-1):1===I&&G(0)),H=null,z=null}}},o.a.createElement("div",{className:A.a.chatHeading},o.a.createElement("h2",null,"#".concat(a.group_name))),o.a.createElement("div",{className:A.a.chatArea},o.a.createElement("div",{ref:T,className:A.a.chats},k&&o.a.createElement(oe,{getPreviousChat:function(e){e.preventDefault(),0!==l.length&&(b(!0),D.current=T.current.scrollHeight,t.emit("cnvo_get_previous_message_chunks",{re_gtoken:F.current,user_id:n,group_id:a.group_id,oldest_message_id:-1===l[0].r_message_id?l[1].r_message_id:l[0].r_message_id}))},fetchingPreviousChat:v}),o.a.createElement(Z,{messageList:l,setMessageToReply:L})),o.a.createElement($,{socket:t,group:a,messageToReply:S,setMessageToReply:L}))))},oe=function(e){var a=e.getPreviousChat,t=e.fetchingPreviousChat;return o.a.createElement("div",{className:"".concat(t?A.a.gettingPrevious:A.a.getPreviousChatButton),onClick:a},!t&&o.a.createElement("div",{className:A.a.previousBtn},o.a.createElement("span",null,"\u02c4")),t&&o.a.createElement("div",{className:A.a.previousBtn},o.a.createElement("span",{style:{"--i":"1"}}),o.a.createElement("span",{style:{"--i":"2"}}),o.a.createElement("span",{style:{"--i":"3"}})))},ce=t(16),se=t(13),le=t.n(se),ie=function(e){var a=e.socket,t=e.group,n=Object(r.useContext)(h).LoginDetail.id,c=Object(r.useState)({}),s=Object(m.a)(c,2),l=s[0],i=s[1],u=Object(r.useState)(!0),_=Object(m.a)(u,2),g=_[0],p=_[1],d=Object(r.useRef)();Object(r.useEffect)((function(){return p(!0),d.current=Object(ee.createToken)(),a.emit("cnvo_get_members_for_group",{r_token:d.current,group_id:t.group_id}),a.on("cnvo_all_members_of_group",(function(e){var a=e.r_token,t=e.r_members;if(a===d.current){var n={};t.forEach((function(e){n[e.r_user_id]=e})),i(n),p(!1)}})),a.on("cnvo_user_online",(function(e){var a=e.r_group,n=e.r_data;a===t.group_id&&i((function(e){return Object(L.a)(Object(L.a)({},e),{},Object(ce.a)({},n.r_user_id,n))}))})),a.on("cnvo_user_offline",(function(e){var a=e.r_group,n=e.r_user_id;a===t.group_id&&i((function(e){var a=e[n];return a.r_status=!1,Object(L.a)(Object(L.a)({},e),{},Object(ce.a)({},n,a))}))})),a.on("cnvo_user_left",(function(e){var a=e.r_group,n=e.r_user_id;a===t.group_id&&i((function(e){var a=Object(L.a)({},e);return delete a[n],Object(L.a)({},a)}))})),function(){a.off("cnvo_all_members_of_group"),a.off("cnvo_user_online"),a.off("cnvo_user_offline"),a.off("cnvo_user_left")}}),[t]);return o.a.createElement(o.a.Fragment,null,g?o.a.createElement("div",{className:le.a.container},o.a.createElement(ne,null)):o.a.createElement("div",{className:le.a.container},o.a.createElement("header",null,o.a.createElement("h2",null,"Members")),o.a.createElement("div",{className:le.a.members},Object.keys(l).some((function(e){return l[e].r_status}))&&o.a.createElement("p",{className:le.a.status},"Online"),o.a.createElement("div",{className:le.a.onlineContainer},Object.keys(l).map((function(e){var a=l[e];if(l[e].r_status)return o.a.createElement("div",{key:e,className:le.a.member},o.a.createElement("span",{className:le.a.onlineTag}),o.a.createElement("p",null,a.r_user_name))}))),Object.keys(l).some((function(e){return!l[e].r_status}))&&o.a.createElement("p",{className:le.a.status},"Offline"),o.a.createElement("div",{className:le.a.offlineContainer},Object.keys(l).map((function(e){var a=l[e];if(!l[e].r_status)return o.a.createElement("div",{key:e,className:le.a.member},o.a.createElement("span",{className:le.a.offlineTag}),o.a.createElement("p",null,a.r_user_name))})))),o.a.createElement("footer",null,o.a.createElement("div",{className:le.a.copy},o.a.createElement("p",null,"Copy Group Code"),o.a.createElement("button",{type:"button",title:"copy group code",onClick:function(){return function(e){var a=document.createElement("input");a.style.position="absolute",a.value=t.group_id,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}()}},"COPY")),o.a.createElement("div",{className:le.a.leave,onClick:function(e){a.emit("cnvo_user_leave_group",{userID:n,groupID:t.group_id})}},o.a.createElement("p",null,"Leave Group"),o.a.createElement("span",null,"\u2348")))))},ue=t(66),me=t(40),_e=t.n(me),ge=function(e){var a=e.setDisplayedGroup,t=e.setGroups,n=e.socket,c=e.setGroupToggle,s=Object(r.useContext)(h).LoginDetail.id,l=Object(r.useState)(""),i=Object(m.a)(l,2),u=i[0],_=i[1],g=Object(r.useState)(""),p=Object(m.a)(g,2),d=p[0],f=p[1],v=Object(r.useState)(""),b=Object(m.a)(v,2),E=b[0],C=b[1];Object(r.useEffect)((function(){return n.on("cnvo_join_group_success",(function(e){var n=e.group_data;c(!1),t((function(e){return Object(L.a)(Object(L.a)({},e),{},Object(ce.a)({},n.group_id,n))})),a(n)})),n.on("cnvo_join_group_error",(function(e){c(!1),console.log(e)})),n.on("cnvo_create_group_success",(function(e){var n=e.group_data;c(!1),t((function(e){return Object(L.a)(Object(ce.a)({},n.group_id,n),e)})),a(n)})),n.on("cnvo_create_group_error",(function(e){c(!1),console.log(e)})),function(){n.off("cnvo_join_group_success"),n.off("cnvo_join_group_error"),n.off("cnvo_create_group_success"),n.off("cnvo_create_group_error")}}));return o.a.createElement("div",{className:_e.a.container,onClick:function(){return c((function(e){return!e}))}},o.a.createElement("div",{className:_e.a.formContainer,onClick:function(e){return e.stopPropagation()}},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==u.length&&n.emit("cnvo_create_group_for_user",{userID:s,group_name:u,group_about:d})}},o.a.createElement("label",null,"Create a new Group:"),o.a.createElement("div",{className:_e.a.inputContainer},o.a.createElement("input",{type:"text",onChange:function(e){return _(e.target.value)},placeholder:"Group Name"}),o.a.createElement("textarea",{placeholder:"What is this group about??",value:d,onChange:function(e){return f(e.target.value)}}),o.a.createElement("input",{type:"submit",value:"Create"}))),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==E.length&&n.emit("cnvo_join_group_for_user",{userID:s,group_id:E})}},o.a.createElement("label",null,"Join a group:"),o.a.createElement("div",{className:_e.a.inputContainer},o.a.createElement("input",{type:"text",onChange:function(e){return C(e.target.value)},placeholder:"Group Code"}),o.a.createElement("input",{type:"submit",value:"Join"})))))},pe=function(){var e=Object(r.useContext)(h).LoginDetail,a=e.loggedIn,t=e.id,c=Object(r.useState)(!0),s=Object(m.a)(c,2),l=s[0],_=s[1],g=Object(r.useState)(!1),p=Object(m.a)(g,2),d=p[0],f=p[1],v=Object(r.useState)({}),b=Object(m.a)(v,2),E=b[0],C=b[1],O=Object(r.useState)({}),j=Object(m.a)(O,2),y=j[0],N=j[1],k=Object(r.useState)(!1),w=Object(m.a)(k,2),x=w[0],M=w[1],S=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(n=Object(ue.a)("".concat(we),{query:"user_id=".concat(t)})).emit("cnvo_get_groups_for_user",{userID:t}),n.on("cnvo_user_groups",(function(e){var a=e.group_list,t={};a.forEach((function(e){t[e.group_id]=e})),N(t),_(!1),M(!0)})),n.on("cnvo_self_left_group",(function(e){var a=e.r_group;N((function(e){var t=Object(L.a)({},e);return delete t[a],M(!0),Object(L.a)({},t)}))})),n.on("cnvo_error",(function(e){return console.log(e)}))}catch(a){console.error(a)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return S(),function(){n.disconnect()}}),[]),Object(r.useEffect)((function(){x&&(0===Object.keys(y).length?C({}):C(y[Object.keys(y)[0]]),M(!1))}),[x]),o.a.createElement("div",{className:D.a.chatContainer},a?l?o.a.createElement("div",{className:D.a.LoaderContainer},o.a.createElement(ne,{background_color:"black"})):o.a.createElement(o.a.Fragment,null,o.a.createElement(B,{groups:y,setDisplayedGroup:C,socket:n,setGroupToggle:f}),0!==Object.keys(E).length&&o.a.createElement(o.a.Fragment,null,o.a.createElement(re,{displayedGroup:E,socket:n}),o.a.createElement(ie,{group:E,socket:n})),0===Object.keys(E).length&&o.a.createElement(fe,null),d&&o.a.createElement(ge,{setDisplayedGroup:C,setGroups:N,setGroupToggle:f,socket:n})):o.a.createElement(de,null))};function de(){return o.a.createElement("div",{className:D.a.notLoggedIn},o.a.createElement("h1",null,"Please log in to use the chat feature!"))}function fe(){var e=Object(r.useState)(!1),a=Object(m.a)(e,2),t=a[0],n=a[1],c=null,s=null;return o.a.createElement("div",{className:"".concat(D.a.xyz," ").concat(t?D.a.slide:""),onTouchStart:function(e){var a=function(e){return e.touches||e.originalEvent.touches}(e)[0];c=a.clientX,s=a.clientY},onTouchMove:function(e){if(c&&s){var a=e.touches[0].clientX,r=e.touches[0].clientY,o=c-a,l=s-r;Math.abs(o)>Math.abs(l)&&(o>0?t&&n(!1):t||n(!0)),c=null,s=null}}},o.a.createElement("p",null,"You Arent In Any Group."),o.a.createElement("p",null,"Join Or Create A Group By Pressing The '+' Icon On The Left"))}var ve=t(4),be=t.n(ve),he={email:"",password:""},Ee=function(e){var a=e.toggle,t=Object(r.useState)(he),n=Object(m.a)(t,2),c=n[0],s=n[1],l=Object(r.useState)({error:!1,message:""}),_=Object(m.a)(l,2),g=_[0],p=_[1],f=Object(r.useState)(!1),v=Object(m.a)(f,2),b=v[0],E=v[1],C=Object(r.useContext)(h).loggin,O=function(){var e=Object(u.a)(i.a.mark((function e(a){var t,n,r,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),0!==c.email.length&&0!==c.password.length){e.next=4;break}return p({error:!0,message:"Please fill in your credientials."}),e.abrupt("return");case 4:return E(!0),e.next=7,d()({method:"POST",url:"".concat(we,"/users/login"),data:{email:c.email,password:c.password}});case 7:t=e.sent,n=t.data,r=n.error,o=n.data,s=n.message,r?(p({error:!0,message:s}),E(!1)):C(o);case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),j=function(e){g.error&&p({error:!1,message:""});var a=e.target,t=a.name,n=a.value;s(Object(L.a)(Object(L.a)({},c),{},Object(ce.a)({},t,n)))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:be.a.innerContainer},o.a.createElement("form",{onSubmit:O,className:be.a.loginForm},o.a.createElement("div",{className:b?be.a.loader:be.a.displayOff}),o.a.createElement("h1",null,"Shadow Clan"),o.a.createElement("input",{className:be.a.textField,type:"email",value:c.email,onChange:j,name:"email",placeholder:"Email"}),o.a.createElement("input",{className:be.a.textField,type:"password",value:c.password,onChange:j,name:"password",placeholder:"Password"}),o.a.createElement("input",{className:be.a.submitBtn,type:"submit",value:"Login",disabled:!!b}),o.a.createElement("p",{className:g.error?be.a.danger:be.a.displayOff},g.message),o.a.createElement("p",null,"Dont have an account?? well... just register!"),o.a.createElement("button",{value:"Register",onClick:function(e){e.preventDefault(),a()}},"Register"))))},Ce=function(e){var a=e.toggle,t=Object(r.useContext)(h).loggin,n=Object(r.useState)({username:"",email:"",password:"",repassword:""}),c=Object(m.a)(n,2),s=c[0],l=c[1],_=Object(r.useState)({error:!1,message:""}),g=Object(m.a)(_,2),p=g[0],f=g[1],v=Object(r.useState)(!1),b=Object(m.a)(v,2),E=b[0],C=b[1],O=function(){for(var e in s)if(0===s[e].length)return[!0,"Please fill in your credientials."];return s.password.length<10?[!0,"password must be at least 10 charecters."]:!1===/[A-Z]/.test(s.password)?[!0,"password must contain upper case letter."]:s.password!==s.repassword?[!0,"passwords must match."]:[!1,""]},j=function(){var e=Object(u.a)(i.a.mark((function e(a){var n,r,o,c,l,u,_,g,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=O(),r=Object(m.a)(n,2),o=r[0],c=r[1],!o){e.next=5;break}return f({error:!0,message:c}),e.abrupt("return");case 5:return C(!0),e.next=8,d()({url:"".concat(we,"/users/register"),method:"POST",data:{username:s.username,email:s.email,password:s.password}});case 8:l=e.sent,u=l.data,_=u.data,g=u.error,p=u.message,g?(f({error:!0,message:p}),C(!1)):t(_);case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),y=function(e){p.error&&f({error:!1,message:""});var a=e.target,t=a.name,n=a.value;l(Object(L.a)(Object(L.a)({},s),{},Object(ce.a)({},t,n)))};return o.a.createElement("div",{className:be.a.innerContainer},o.a.createElement("form",{onSubmit:j},o.a.createElement("div",{className:E?be.a.loader:be.a.displayOff}),o.a.createElement("h1",null,"Shadow Clan"),o.a.createElement("input",{type:"text",placeholder:"username",name:"username",value:s.username,onChange:y}),o.a.createElement("input",{type:"email",placeholder:"email",name:"email",value:s.email,onChange:y}),o.a.createElement("input",{type:"password",placeholder:"password",name:"password",value:s.password,onChange:y}),o.a.createElement("input",{type:"password",placeholder:"re-enter password",name:"repassword",value:s.repassword,onChange:y}),o.a.createElement("input",{type:"submit",value:"Register",disabled:!!E}),o.a.createElement("p",{className:p.error?be.a.danger:be.a.displayOff},p.message),o.a.createElement("p",null,"have an account?? well... just login!"),o.a.createElement("button",{value:"Login",onClick:function(e){e.preventDefault(),a()}},"Login")))},Oe=function(){var e=Object(r.useContext)(h).LoginDetail.username;return o.a.createElement("div",{className:be.a.innerContainer},o.a.createElement("h2",null,"You are logged in as ",e))},je=function(e){var a=e.isLogin,t=Object(r.useContext)(h).LoginDetail,n=Object(r.useState)(a),c=Object(m.a)(n,2),s=c[0],l=c[1];Object(r.useEffect)((function(){l(a)}),[a]);var i=function(){l(!s)};return o.a.createElement("div",{className:be.a.container},o.a.createElement("div",{className:be.a.arc}),t.loggedIn?o.a.createElement(Oe,null):s?o.a.createElement(Ee,{toggle:i}):o.a.createElement(Ce,{toggle:i}))},ye=t(65),Ne=t.n(ye),ke=function(){return o.a.createElement("div",{className:Ne.a.container},o.a.createElement("div",null,["C","O","N","V","O"].map((function(e,a){return o.a.createElement("h1",{key:a,style:{"--i":a}},e)}))),o.a.createElement("p",null,"Authentication In Progress . . . ."))},we="http://localhost:4000",xe=function(){var e=Object(r.useState)(!0),a=Object(m.a)(e,2),t=a[0],n=a[1],c=Object(r.useContext)(h).loggin;Object(r.useEffect)((function(){s()}),[]);var s=function(){var e=Object(u.a)(i.a.mark((function e(){var a,t,r,o,s,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===localStorage.getItem("LogDetail")){e.next=13;break}return a=JSON.parse(localStorage.getItem("LogDetail")),e.next=4,d()({method:"POST",url:"".concat(we,"/users/login-with-jwt"),data:{token:a}});case 4:t=e.sent,r=t.data,o=r.data,s=r.error,l=r.message,u=r.deleteToken,s?(console.log(l),n(!1),u&&localStorage.removeItem("LogDetail")):(c(o),n(!1)),e.next=14;break;case 13:n(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,t?o.a.createElement(ke,null):o.a.createElement(_.a,null,o.a.createElement(C,null),o.a.createElement(g.c,null,o.a.createElement(g.a,{path:"/",exact:!0,element:o.a.createElement(S,null)}),o.a.createElement(g.a,{path:"/chat",exact:!0,element:o.a.createElement(pe,null)}),o.a.createElement(g.a,{path:"/login",exact:!0,element:o.a.createElement(je,{isLogin:!0})}),o.a.createElement(g.a,{path:"/register",exact:!0,element:o.a.createElement(je,{isLogin:!1})}))))};t(97);s.a.createRoot(document.getElementById("root")).render(o.a.createElement(E,null,o.a.createElement(xe,null)))}},[[67,1,2]]]);
//# sourceMappingURL=main.803de3fa.chunk.js.map